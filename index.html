<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Live TV</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Theme -->
<meta name="theme-color" content="#0b0b0b">

<!-- CSS -->
<link rel="stylesheet" href="assets/style.css">

<style>
/* ===== PAGE LAYOUT ===== */
body {
  background: radial-gradient(circle at top, #151515, #0b0b0b 60%);
}

/* ===== HEADER ===== */
.header {
  padding: 16px;
  text-align: center;
  font-size: 20px;
  font-weight: 600;
  letter-spacing: 0.5px;
}

/* ===== SEARCH ===== */
.search-wrap {
  padding: 0 14px 10px;
}

#search {
  width: 100%;
  padding: 14px;
  border-radius: 14px;
  background: #141414;
  border: 1px solid #2a2a2a;
  color: #fff;
  font-size: 15px;
}

/* ===== CATEGORIES ===== */
#categories {
  display: flex;
  gap: 10px;
  overflow-x: auto;
  padding: 6px 14px 14px;
}

#categories button {
  background: rgba(255,255,255,0.06);
  border: 1px solid #2a2a2a;
  color: #fff;
  padding: 8px 16px;
  border-radius: 999px;
  font-size: 13px;
  cursor: pointer;
  backdrop-filter: blur(6px);
}

#categories button:hover {
  background: rgba(255,122,0,0.2);
  border-color: #ff7a00;
}

/* ===== GRID ===== */
#grid {
  padding: 14px;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
  gap: 14px;
}

/* ===== CARD ===== */
.card {
  background: linear-gradient(180deg, #1a1a1a, #0e0e0e);
  border-radius: 16px;
  padding: 14px;
  border: 1px solid #262626;
  cursor: pointer;
  transition: transform .2s ease, box-shadow .2s ease;
}

.card:hover {
  transform: translateY(-4px);
  box-shadow: 0 10px 25px rgba(0,0,0,0.6);
}

.card img {
  width: 100%;
  height: 70px;
  object-fit: contain;
}

.card span {
  display: block;
  margin-top: 10px;
  font-size: 13px;
  text-align: center;
  opacity: .9;
}
</style>
</head>

<body>

<div class="header">ðŸ“º Live TV</div>

<div class="search-wrap">
  <input
    id="search"
    type="text"
    placeholder="Search channels..."
    autocomplete="off"
  />
</div>

<div id="categories"></div>

<div id="grid"></div>

<script>
let DATA = null;

/* ===== LOAD CHANNEL JSON ===== */
fetch("data/channels.json")
  .then(r => r.json())
  .then(j => {
    DATA = j;
    renderCategories();
    renderChannels();
  });

/* ===== CATEGORIES ===== */
function renderCategories() {
  const box = document.getElementById("categories");
  box.innerHTML = "";

  const all = document.createElement("button");
  all.textContent = "All";
  all.onclick = () => renderChannels();
  box.appendChild(all);

  DATA.categories.forEach(cat => {
    const b = document.createElement("button");
    b.textContent = cat.name;
    b.onclick = () => renderChannels(cat.name);
    box.appendChild(b);
  });
}

/* ===== CHANNEL GRID ===== */
function renderChannels(category = null) {
  const q = document.getElementById("search").value.toLowerCase();
  const grid = document.getElementById("grid");
  grid.innerHTML = "";

  DATA.categories.forEach(cat => {
    if (category && cat.name !== category) return;

    cat.channels.forEach(ch => {
      if (!ch.name.toLowerCase().includes(q)) return;

      const card = document.createElement("div");
      card.className = "card";

      card.innerHTML = `
        <img src="${ch.logo}" alt="${ch.name}">
        <span>${ch.name} (${ch.quality})</span>
      `;

      card.onclick = () => {
        localStorage.setItem("stream", ch.url);
        localStorage.setItem("title", ch.name);
        location.href = "player.html";
      };

      grid.appendChild(card);
    });
  });
}

/* ===== SEARCH ===== */
document.getElementById("search")
  .addEventListener("input", () => renderChannels());
</script>

</body>
</html>
